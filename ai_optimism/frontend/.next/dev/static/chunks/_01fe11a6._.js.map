{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/ChatPanel.tsx"],"sourcesContent":["'use client';\n\nimport { Box, Paper, TextField, IconButton, Typography, Avatar, Button, CircularProgress } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh';\nimport { useChat } from '@ai-sdk/react';\nimport { DefaultChatTransport } from 'ai';\nimport { useAIProvider } from '../contexts/AIProviderContext';\nimport { useEffect, useRef, useState, useMemo } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\n\ninterface ChatPanelProps {\n  onControlsGenerated?: (controls: unknown) => void;\n}\n\nexport function ChatPanel({ onControlsGenerated }: ChatPanelProps) {\n  const { state } = useAIProvider();\n  const { apiKey, provider, model } = state;\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [input, setInput] = useState('');\n\n  // Clear any stale chat state from previous sessions when no API key is present\n  useEffect(() => {\n    if (!apiKey && typeof window !== 'undefined') {\n      // Clear any persisted chat state\n      const keysToRemove = Object.keys(localStorage).filter(key => \n        key.startsWith('chat-') || key.includes('optimization-chat')\n      );\n      keysToRemove.forEach(key => localStorage.removeItem(key));\n    }\n  }, [apiKey]);\n\n  // Create transport with body containing API key, provider, and model\n  const transport = useMemo(() => {\n    return new DefaultChatTransport({\n      api: '/api/chat',\n      body: {\n        apiKey: apiKey || '', // Pass empty string if no key (will be rejected by API)\n        provider: provider || 'google',\n        model: model || 'gemini-2.0-flash',\n      },\n    });\n  }, [apiKey, provider, model]);\n\n  // Use useChat with custom transport\n  // Use a unique ID per session to avoid loading stale chats when not connected\n  const chatId = apiKey ? 'optimization-chat' : 'optimization-chat-disconnected';\n  \n  const { messages, sendMessage, status, error } = useChat({\n    id: chatId,\n    transport,\n  });\n  \n  const isLoading = status === 'streaming';\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Extract conversation text for generation\n  const getConversationText = () => {\n    return messages\n      .map(m => {\n        const text = m.parts?.filter((p: any) => p.type === 'text').map((p: any) => p.text).join('') || '';\n        return `${m.role}: ${text}`;\n      })\n      .join('\\n');\n  };\n\n  // Generate controls from conversation\n  const handleGenerateControls = async () => {\n    if (!apiKey) {\n      alert('Please connect to an AI provider first');\n      return;\n    }\n\n    setIsGenerating(true);\n    try {\n      const conversationText = getConversationText();\n      \n      const response = await fetch('/api/generate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-api-key': apiKey,\n        },\n        body: JSON.stringify({\n          description: conversationText,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Generation failed: ${response.statusText}`);\n      }\n\n      const controls = await response.json();\n      console.log('[ChatPanel] Generated controls:', controls);\n      \n      // Pass to parent component\n      if (onControlsGenerated) {\n        onControlsGenerated(controls);\n      }\n\n    } catch (error) {\n      console.error('[ChatPanel] Generation error:', error);\n      alert('Failed to generate controls. Please try again.');\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Log errors (but suppress API key errors when not connected)\n  useEffect(() => {\n    if (error && apiKey) {\n      console.error('[ChatPanel] Chat error:', error);\n    }\n  }, [error, apiKey]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    if (!apiKey) {\n      alert('Please connect to an AI provider first');\n      return;\n    }\n    \n    // Send message with proper structure: role and parts array\n    sendMessage({\n      role: 'user',\n      parts: [{ type: 'text', text: input }],\n    });\n    \n    setInput('');\n  };\n\n  return (\n    <Paper\n      elevation={2}\n      sx={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          p: 2,\n          borderBottom: 1,\n          borderColor: 'divider',\n          bgcolor: 'primary.main',\n          color: 'primary.contrastText',\n        }}\n      >\n        <Typography variant=\"h6\" fontWeight=\"bold\">\n          üí¨ Chat Assistant\n        </Typography>\n        <Typography variant=\"caption\">\n          Describe your optimization problem\n        </Typography>\n      </Box>\n\n      {/* Messages */}\n      <Box\n        sx={{\n          flex: 1,\n          overflowY: 'auto',\n          p: 2,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n        }}\n      >\n        {/* Show connection prompt if no API key */}\n        {!apiKey && (\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 1,\n              alignItems: 'flex-start',\n            }}\n          >\n            <Avatar\n              sx={{\n                bgcolor: 'warning.main',\n                width: 32,\n                height: 32,\n              }}\n            >\n              ‚ö†Ô∏è\n            </Avatar>\n            <Paper\n              elevation={1}\n              sx={{\n                p: 2,\n                maxWidth: '80%',\n                bgcolor: 'warning.light',\n              }}\n            >\n              <Typography\n                variant=\"body2\"\n                sx={{\n                  whiteSpace: 'pre-wrap',\n                  wordBreak: 'break-word',\n                }}\n              >\n                {`Please connect to an AI provider first!\n\nClick the \"AI Connection\" button in the top-right corner to configure your API key.`}\n              </Typography>\n            </Paper>\n          </Box>\n        )}\n\n        {/* Welcome message if connected but no messages yet */}\n        {apiKey && messages.length === 0 && (\n          <Box\n            sx={{\n              display: 'flex',\n              gap: 1,\n              alignItems: 'flex-start',\n            }}\n          >\n            <Avatar\n              sx={{\n                bgcolor: 'secondary.main',\n                width: 32,\n                height: 32,\n              }}\n            >\n              ü§ñ\n            </Avatar>\n            <Paper\n              elevation={1}\n              sx={{\n                p: 2,\n                maxWidth: '80%',\n                bgcolor: 'grey.100',\n              }}\n            >\n              <Typography\n                variant=\"body2\"\n                sx={{\n                  whiteSpace: 'pre-wrap',\n                  wordBreak: 'break-word',\n                }}\n              >\n                {`Welcome to the AI Optimism Toolkit! üëã\n\nI'll help you design your optimization problem. Let's start by understanding what you're trying to optimize.\n\nWhat problem would you like to solve? For example:\n‚Ä¢ Optimize a recipe\n‚Ä¢ Minimize manufacturing costs\n‚Ä¢ Maximize energy efficiency\n‚Ä¢ Design an optimal schedule\n\nDescribe your problem, and I'll help you define variables, constraints, and objectives.`}\n              </Typography>\n            </Paper>\n          </Box>\n        )}\n        \n        {/* Chat messages */}\n        {messages.map((message: any) => {\n          // Extract text from message - try multiple formats\n          let textContent = '';\n          \n          // AI SDK v5 format with parts array\n          if (message.parts && Array.isArray(message.parts)) {\n            textContent = message.parts\n              .filter((p: any) => p.type === 'text')\n              .map((p: any) => p.text)\n              .join('');\n          }\n          // Legacy format with content string\n          else if (typeof message.content === 'string') {\n            textContent = message.content;\n          }\n          // Direct text property\n          else if (message.text) {\n            textContent = message.text;\n          }\n          // Fallback - stringify for debugging\n          else {\n            console.warn('[ChatPanel] Unknown message format:', message);\n            textContent = JSON.stringify(message);\n          }\n          \n          return (\n            <Box\n              key={message.id}\n              sx={{\n                display: 'flex',\n                gap: 1,\n                alignItems: 'flex-start',\n                flexDirection: message.role === 'user' ? 'row-reverse' : 'row',\n              }}\n            >\n              <Avatar\n                sx={{\n                  bgcolor: message.role === 'user' ? 'primary.main' : 'secondary.main',\n                  width: 32,\n                  height: 32,\n                }}\n              >\n                {message.role === 'user' ? 'üë§' : 'ü§ñ'}\n              </Avatar>\n              <Paper\n                elevation={1}\n                sx={{\n                  p: 2,\n                  maxWidth: '80%',\n                  bgcolor: message.role === 'user' ? 'primary.light' : 'grey.100',\n                  color: message.role === 'user' ? 'primary.contrastText' : 'text.primary',\n                }}\n              >\n                {message.role === 'assistant' ? (\n                  <Box\n                    sx={{\n                      '& p': { mb: 1 },\n                      '& ul, & ol': { pl: 2, mb: 1 },\n                      '& li': { mb: 0.5 },\n                      '& code': {\n                        bgcolor: 'grey.200',\n                        px: 0.5,\n                        py: 0.25,\n                        borderRadius: 0.5,\n                        fontFamily: 'monospace',\n                        fontSize: '0.875em',\n                      },\n                      '& pre': {\n                        bgcolor: 'grey.200',\n                        p: 1,\n                        borderRadius: 1,\n                        overflow: 'auto',\n                        mb: 1,\n                      },\n                      '& pre code': {\n                        bgcolor: 'transparent',\n                        p: 0,\n                      },\n                      '& table': {\n                        borderCollapse: 'collapse',\n                        width: '100%',\n                        mb: 1,\n                      },\n                      '& th, & td': {\n                        border: '1px solid',\n                        borderColor: 'divider',\n                        p: 1,\n                        textAlign: 'left',\n                      },\n                      '& th': {\n                        bgcolor: 'grey.200',\n                        fontWeight: 'bold',\n                      },\n                      '& h1, & h2, & h3, & h4, & h5, & h6': {\n                        mt: 2,\n                        mb: 1,\n                        fontWeight: 'bold',\n                      },\n                      '& blockquote': {\n                        borderLeft: '4px solid',\n                        borderColor: 'primary.main',\n                        pl: 2,\n                        my: 1,\n                        color: 'text.secondary',\n                      },\n                    }}\n                  >\n                    <ReactMarkdown remarkPlugins={[remarkGfm]}>\n                      {textContent}\n                    </ReactMarkdown>\n                  </Box>\n                ) : (\n                  <Typography\n                    variant=\"body2\"\n                    sx={{\n                      whiteSpace: 'pre-wrap',\n                      wordBreak: 'break-word',\n                    }}\n                  >\n                    {textContent}\n                  </Typography>\n                )}\n              </Paper>\n            </Box>\n          );\n        })}\n        {isLoading && (\n          <Box sx={{ display: 'flex', gap: 1, alignItems: 'center' }}>\n            <Avatar sx={{ bgcolor: 'secondary.main', width: 32, height: 32 }}>\n              ü§ñ\n            </Avatar>\n            <Paper elevation={1} sx={{ p: 2, bgcolor: 'grey.100', display: 'flex', alignItems: 'center', gap: 1.5 }}>\n              <CircularProgress size={16} thickness={5} />\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Thinking...\n              </Typography>\n            </Paper>\n          </Box>\n        )}\n        <div ref={messagesEndRef} />\n      </Box>\n\n      {/* Generate Controls Button */}\n      {messages.length > 0 && apiKey && (\n        <Box\n          sx={{\n            px: 2,\n            pb: 1,\n            borderTop: 1,\n            borderColor: 'divider',\n            bgcolor: 'grey.50',\n          }}\n        >\n          <Button\n            fullWidth\n            variant=\"contained\"\n            color=\"secondary\"\n            startIcon={isGenerating ? <CircularProgress size={16} /> : <AutoFixHighIcon />}\n            onClick={handleGenerateControls}\n            disabled={isGenerating || isLoading}\n            sx={{ py: 1 }}\n          >\n            {isGenerating ? 'Generating Controls...' : '‚ú® Generate Controls Panel'}\n          </Button>\n          <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 0.5, display: 'block' }}>\n            Extract variables, properties, and constraints from the conversation\n          </Typography>\n        </Box>\n      )}\n\n      {/* Input */}\n      <Box\n        component=\"form\"\n        onSubmit={handleSubmit}\n        sx={{\n          p: 2,\n          borderTop: 1,\n          borderColor: 'divider',\n          display: 'flex',\n          gap: 1,\n        }}\n      >\n        <TextField\n          fullWidth\n          size=\"small\"\n          placeholder=\"Describe your optimization problem...\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          disabled={isLoading || !apiKey}\n        />\n        <IconButton\n          type=\"submit\"\n          color=\"primary\"\n          disabled={isLoading || !input.trim() || !apiKey}\n        >\n          <SendIcon />\n        </IconButton>\n      </Box>\n\n      {!apiKey && (\n        <Box sx={{ p: 2, bgcolor: 'warning.light', textAlign: 'center' }}>\n          <Typography variant=\"caption\" color=\"warning.dark\">\n            Please configure your AI API key in the top right corner\n          </Typography>\n        </Box>\n      )}\n    </Paper>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/ControlsPanel.tsx"],"sourcesContent":["'use client';\n\nimport { Box, Paper, Typography, Tabs, Tab } from '@mui/material';\nimport { useState, useEffect, useRef } from 'react';\nimport { VariablesTab, Variable } from './controls/VariablesTab';\nimport { ObjectivesTab, Objective } from './controls/ObjectivesTab';\nimport { PropertiesTab, Property } from './controls/PropertiesTab';\nimport { ConstraintsTab, Constraint } from './controls/ConstraintsTab';\nimport { PythonDefinitionTab } from './controls/PythonDefinitionTab';\nimport {\n  validatePythonExpression,\n  checkVariableReferences,\n  validateRange,\n  ValidationError,\n} from './controls/ValidationUtils';\n\ninterface GeneratedControls {\n  variables?: Variable[];\n  objectives?: Objective[];\n  properties?: Property[];\n  constraints?: Constraint[];\n}\n\ninterface ControlsPanelProps {\n  controls?: unknown;\n  onVariablesChange?: (variables: Record<string, number>) => void;\n  onControlsUpdate?: (controls: GeneratedControls) => void;\n}\n\nexport function ControlsPanel({ controls, onVariablesChange, onControlsUpdate }: ControlsPanelProps) {\n  const [tabValue, setTabValue] = useState(0);\n  \n  // Extract variables from generated controls\n  const generatedControls = controls as GeneratedControls | null;\n  const [variables, setVariables] = useState<Variable[]>(generatedControls?.variables || []);\n  const [objectives, setObjectives] = useState<Objective[]>(generatedControls?.objectives || []);\n  const [properties, setProperties] = useState<Property[]>(generatedControls?.properties || []);\n  const [constraints, setConstraints] = useState<Constraint[]>(generatedControls?.constraints || []);\n  \n  // Update local state when controls prop changes\n  useEffect(() => {\n    setVariables(generatedControls?.variables || []);\n    setObjectives(generatedControls?.objectives || []);\n    setProperties(generatedControls?.properties || []);\n    setConstraints(generatedControls?.constraints || []);\n  }, [controls]);\n  \n  const [values, setValues] = useState<Record<string, number>>({});\n  const [isManualEdit, setIsManualEdit] = useState(false); // Track if user is manually editing\n  const parseTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null); // Store timeout reference\n  const shouldRegenerateRef = useRef(true); // Control whether to regenerate script\n  const [validationErrors, setValidationErrors] = useState<ValidationError[]>([]); // Validation errors\n\n  // Update values when controls change\n  useEffect(() => {\n    const initial: Record<string, number> = {};\n    variables.forEach((v) => {\n      initial[v.name] = v.default ?? 0; // Use 0 as fallback if default is undefined\n    });\n    setValues(initial);\n  }, [controls]); // Re-run when controls change\n\n  // Generate Python script from variables\n  const generateScript = () => {\n    const lines: string[] = [];\n    \n    // Variables section\n    if (variables.length > 0) {\n      lines.push('# ========== VARIABLES ==========');\n      lines.push('');\n      variables.forEach((v) => {\n        lines.push(`${v.name} = ${values[v.name] ?? v.default ?? 0}  # ${v.description}${v.unit ? ` (${v.unit})` : ''}`);\n        lines.push(`# Range: [${v.min}, ${v.max}]`);\n        lines.push('');\n      });\n    }\n    \n    // Objectives section\n    if (objectives.length > 0) {\n      lines.push('# ========== OBJECTIVES ==========');\n      lines.push('');\n      objectives.forEach((o) => {\n        lines.push(`# ${o.name} (${o.goal})`);\n        lines.push(`# ${o.description}`);\n        lines.push(`objective_${o.name.toLowerCase().replace(/\\s+/g, '_')} = ${o.expression}`);\n        lines.push('');\n      });\n    }\n    \n    // Properties section\n    if (properties.length > 0) {\n      lines.push('# ========== PROPERTIES ==========');\n      lines.push('');\n      properties.forEach((p) => {\n        lines.push(`# ${p.description}`);\n        lines.push(`${p.name} = ${p.expression}`);\n        lines.push('');\n      });\n    }\n    \n    // Constraints section\n    if (constraints.length > 0) {\n      lines.push('# ========== CONSTRAINTS ==========');\n      lines.push('');\n      constraints.forEach((c, i) => {\n        lines.push(`# Constraint ${i + 1}: ${c.description}`);\n        lines.push(`# Must satisfy: ${c.expression}`);\n        lines.push('');\n      });\n    }\n    \n    return lines.join('\\n');\n  };\n\n  const [script, setScript] = useState(generateScript());\n\n  // Regenerate script when variables or values change (but not during manual edits)\n  useEffect(() => {\n    if (!isManualEdit && shouldRegenerateRef.current) {\n      setScript(generateScript());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [values, variables, objectives, properties, constraints]); // Don't include isManualEdit in deps!\n\n  // Parse script changes back to values and ranges\n  const handleScriptChange = (newScript: string) => {\n    setIsManualEdit(true); // Prevent auto-regeneration while editing\n    shouldRegenerateRef.current = false; // Disable regeneration completely during manual edit\n    setScript(newScript);\n    \n    // Clear any existing timeout\n    if (parseTimeoutRef.current) {\n      clearTimeout(parseTimeoutRef.current);\n    }\n    \n    // Debounce parsing to avoid performance issues and allow continuous typing\n    parseTimeoutRef.current = setTimeout(() => {\n      parseScriptChanges(newScript);\n      setIsManualEdit(false); // Re-enable auto-regeneration\n      shouldRegenerateRef.current = true; // Re-enable regeneration after parsing\n      parseTimeoutRef.current = null;\n    }, 800);\n  };\n\n  const parseScriptChanges = (newScript: string) => {\n    const lines = newScript.split('\\n');\n    const updatedValues: Record<string, number> = { ...values };\n    const updatedObjectives: Objective[] = [...objectives];\n    const updatedProperties: Property[] = [...properties];\n    const updatedConstraints: Constraint[] = [...constraints];\n    let hasChanges = false;\n    \n    lines.forEach((line, index) => {\n      // Parse variable assignments\n      const assignMatch = line.match(/^(\\w+)\\s*=\\s*([\\d.-]+)/);\n      if (assignMatch) {\n        const [, varName, value] = assignMatch;\n        if (variables.some(v => v.name === varName)) {\n          const newValue = parseFloat(value);\n          if (updatedValues[varName] !== newValue) {\n            updatedValues[varName] = newValue;\n            hasChanges = true;\n          }\n        }\n      }\n      \n      // Parse range changes\n      const rangeMatch = line.match(/^#\\s*Range:\\s*\\[\\s*([\\d.-]+)\\s*,\\s*([\\d.-]+)\\s*\\]/);\n      if (rangeMatch) {\n        const prevVarMatch = lines[index - 1]?.match(/^(\\w+)\\s*=/);\n        if (prevVarMatch) {\n          const varName = prevVarMatch[1];\n          const variable = variables.find(v => v.name === varName);\n          if (variable) {\n            const newMin = parseFloat(rangeMatch[1]);\n            const newMax = parseFloat(rangeMatch[2]);\n            if (variable.min !== newMin || variable.max !== newMax) {\n              variable.min = newMin;\n              variable.max = newMax;\n              hasChanges = true;\n            }\n          }\n        }\n      }\n      \n      // Parse objective expressions: \"objective_minimize_cost = expression\"\n      const objectiveMatch = line.match(/^objective_(\\w+)\\s*=\\s*(.+)$/);\n      if (objectiveMatch) {\n        const [, namePart, expression] = objectiveMatch;\n        const objective = updatedObjectives.find(o => \n          o.name.toLowerCase().replace(/\\s+/g, '_') === namePart\n        );\n        if (objective && objective.expression !== expression.trim()) {\n          objective.expression = expression.trim();\n          hasChanges = true;\n        }\n      }\n      \n      // Parse property expressions: \"property_name = expression\"\n      const propertyMatch = line.match(/^(\\w+)\\s*=\\s*(.+)$/);\n      if (propertyMatch && !line.startsWith('objective_')) {\n        const [, propName, expression] = propertyMatch;\n        const property = updatedProperties.find(p => p.name === propName);\n        if (property && property.expression !== expression.trim()) {\n          property.expression = expression.trim();\n          hasChanges = true;\n        }\n      }\n      \n      // Parse constraint expressions: \"# Must satisfy: expression\"\n      const constraintMatch = line.match(/^#\\s*Must satisfy:\\s*(.+)$/);\n      if (constraintMatch) {\n        const expression = constraintMatch[1].trim();\n        // Find constraint by looking at previous comment with \"Constraint N\"\n        const prevLine = lines[index - 1];\n        const constraintNumMatch = prevLine?.match(/^#\\s*Constraint\\s+(\\d+)/);\n        if (constraintNumMatch) {\n          const constraintIndex = parseInt(constraintNumMatch[1]) - 1;\n          if (updatedConstraints[constraintIndex] && \n              updatedConstraints[constraintIndex].expression !== expression) {\n            updatedConstraints[constraintIndex].expression = expression;\n            hasChanges = true;\n          }\n        }\n      }\n    });\n    \n    // Only update state if values actually changed\n    if (hasChanges) {\n      setValues(updatedValues);\n      onVariablesChange?.(updatedValues);\n      \n      // Update the arrays\n      setObjectives(updatedObjectives);\n      setProperties(updatedProperties);\n      setConstraints(updatedConstraints);\n      \n      // Notify parent of full control updates\n      if (onControlsUpdate) {\n        onControlsUpdate({\n          variables,\n          objectives: updatedObjectives,\n          properties: updatedProperties,\n          constraints: updatedConstraints,\n        });\n      }\n    }\n  };\n\n  const handleSliderChange = (name: string) => (_event: Event, newValue: number | number[]) => {\n    const value = Array.isArray(newValue) ? newValue[0] : newValue;\n    const updated = { ...values, [name]: value };\n    setValues(updated);\n    // useEffect will regenerate script automatically\n    onVariablesChange?.(updated);\n  };\n\n  return (\n    <Paper\n      elevation={2}\n      sx={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          p: 2,\n          borderBottom: 1,\n          borderColor: 'divider',\n          bgcolor: 'secondary.main',\n          color: 'secondary.contrastText',\n        }}\n      >\n        <Typography variant=\"h6\" fontWeight=\"bold\">\n          üéõÔ∏è Controls\n        </Typography>\n        <Typography variant=\"caption\">\n          Adjust optimization parameters\n        </Typography>\n      </Box>\n\n      {/* Tabs */}\n      <Tabs \n        value={tabValue} \n        onChange={(_, v) => setTabValue(v)} \n        sx={{ borderBottom: 1, borderColor: 'divider' }}\n        variant=\"scrollable\"\n        scrollButtons=\"auto\"\n      >\n        <Tab label=\"Variables\" />\n        <Tab label=\"Objectives\" />\n        <Tab label=\"Properties\" />\n        <Tab label=\"Constraints\" />\n        <Tab label=\"Python Definition\" />\n      </Tabs>\n\n      {/* Content */}\n      <Box sx={{ flex: 1, overflowY: 'auto', p: 2 }}>\n        {/* Tab 0: Variables (Interactive) */}\n        {tabValue === 0 && (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n            {variables.length === 0 ? (\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" sx={{ py: 4 }}>\n                No variables defined yet. Use the chat to describe your optimization problem.\n              </Typography>\n            ) : (\n              variables.map((variable) => (\n                <Box key={variable.name}>\n                  <Typography variant=\"subtitle2\" gutterBottom>\n                    {variable.name}\n                    {variable.unit && (\n                      <Typography component=\"span\" variant=\"caption\" color=\"text.secondary\">\n                        {' '}\n                        ({variable.unit})\n                      </Typography>\n                    )}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 1 }}>\n                    {variable.description}\n                  </Typography>\n                  <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n                    <Slider\n                      value={values[variable.name] ?? variable.default ?? variable.min}\n                      onChange={handleSliderChange(variable.name)}\n                      min={variable.min}\n                      max={variable.max}\n                      step={variable.type === 'discrete' ? 1 : (variable.max - variable.min) / 100}\n                      marks={[\n                        { value: variable.min, label: variable.min.toString() },\n                        { value: variable.max, label: variable.max.toString() },\n                      ]}\n                      valueLabelDisplay=\"auto\"\n                      sx={{ flex: 1 }}\n                    />\n                    <TextField\n                      type=\"number\"\n                      value={values[variable.name] ?? variable.default ?? 0}\n                      onChange={(e) => handleSliderChange(variable.name)(e as any, parseFloat(e.target.value))}\n                      size=\"small\"\n                      sx={{ width: 100 }}\n                      inputProps={{\n                        min: variable.min,\n                        max: variable.max,\n                        step: variable.type === 'discrete' ? 1 : 0.01,\n                      }}\n                    />\n                  </Box>\n                  <Divider sx={{ mt: 2 }} />\n                </Box>\n              ))\n            )}\n          </Box>\n        )}\n\n        {/* Tab 1: Objectives */}\n        {tabValue === 1 && (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            {objectives.length === 0 ? (\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" sx={{ py: 4 }}>\n                No objectives defined yet. Objectives define what to optimize for.\n              </Typography>\n            ) : (\n              objectives.map((objective, idx) => (\n                <Paper \n                  key={idx} \n                  variant=\"outlined\" \n                  sx={{ \n                    p: 2,\n                    borderLeft: 4,\n                    borderLeftColor: objective.goal === 'maximize' ? 'success.main' : 'primary.main',\n                  }}\n                >\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                    <Typography \n                      variant=\"overline\" \n                      sx={{ \n                        fontWeight: 'bold',\n                        color: objective.goal === 'maximize' ? 'success.main' : 'primary.main',\n                      }}\n                    >\n                      {objective.goal === 'maximize' ? 'üìà Maximize' : 'üìâ Minimize'}\n                    </Typography>\n                  </Box>\n                  <Typography variant=\"h6\" fontWeight=\"bold\" gutterBottom>\n                    {objective.name}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 1 }}>\n                    {objective.description}\n                  </Typography>\n                  <Box\n                    sx={{\n                      bgcolor: objective.goal === 'maximize' ? 'success.50' : 'primary.50',\n                      p: 1.5,\n                      borderRadius: 1,\n                      fontFamily: 'monospace',\n                      fontSize: '0.875rem',\n                      border: 1,\n                      borderColor: objective.goal === 'maximize' ? 'success.light' : 'primary.light',\n                    }}\n                  >\n                    {objective.expression}\n                  </Box>\n                </Paper>\n              ))\n            )}\n          </Box>\n        )}\n\n        {/* Tab 2: Properties */}\n        {tabValue === 2 && (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            {properties.length === 0 ? (\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" sx={{ py: 4 }}>\n                No properties defined yet. Properties are calculated values based on variables.\n              </Typography>\n            ) : (\n              properties.map((property, idx) => (\n                <Paper key={idx} variant=\"outlined\" sx={{ p: 2 }}>\n                  <Typography variant=\"subtitle2\" fontWeight=\"bold\" gutterBottom>\n                    {property.name}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 1 }}>\n                    {property.description}\n                  </Typography>\n                  <Box\n                    sx={{\n                      bgcolor: 'grey.100',\n                      p: 1.5,\n                      borderRadius: 1,\n                      fontFamily: 'monospace',\n                      fontSize: '0.875rem',\n                    }}\n                  >\n                    {property.expression}\n                  </Box>\n                </Paper>\n              ))\n            )}\n          </Box>\n        )}\n\n        {/* Tab 3: Constraints */}\n        {tabValue === 3 && (\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\n            {constraints.length === 0 ? (\n              <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" sx={{ py: 4 }}>\n                No constraints defined yet. Constraints are rules that solutions must satisfy.\n              </Typography>\n            ) : (\n              constraints.map((constraint, idx) => (\n                <Paper key={idx} variant=\"outlined\" sx={{ p: 2 }}>\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n                    <Box\n                      sx={{\n                        width: 8,\n                        height: 8,\n                        borderRadius: '50%',\n                        bgcolor: 'warning.main',\n                      }}\n                    />\n                    <Typography variant=\"subtitle2\" fontWeight=\"bold\">\n                      Constraint {idx + 1}\n                    </Typography>\n                  </Box>\n                  <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\" sx={{ mb: 1 }}>\n                    {constraint.description}\n                  </Typography>\n                  <Box\n                    sx={{\n                      bgcolor: 'grey.100',\n                      p: 1.5,\n                      borderRadius: 1,\n                      fontFamily: 'monospace',\n                      fontSize: '0.875rem',\n                      border: 1,\n                      borderColor: 'warning.light',\n                    }}\n                  >\n                    {constraint.expression}\n                  </Box>\n                </Paper>\n              ))\n            )}\n          </Box>\n        )}\n\n        {/* Tab 4: Python Definition */}\n        {tabValue === 4 && (\n          <Box>\n            <Box\n              sx={{\n                bgcolor: '#1e1e1e',\n                borderRadius: 1,\n                overflow: 'hidden',\n                border: 1,\n                borderColor: 'divider',\n              }}\n            >\n              <Editor\n                value={script}\n                onValueChange={handleScriptChange}\n                highlight={(code) => Prism.highlight(code, Prism.languages.python, 'python')}\n                padding={16}\n                style={{\n                  fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n                  fontSize: 13,\n                  minHeight: 200,\n                  backgroundColor: '#1e1e1e',\n                  color: '#d4d4d4',\n                }}\n              />\n            </Box>\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 1, display: 'block' }}>\n              Edit variable values and ranges. Changes apply after you stop typing (800ms delay).\n            </Typography>\n          </Box>\n        )}\n      </Box>\n\n      {/* Actions */}\n      <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\n        <Button variant=\"contained\" fullWidth disabled={variables.length === 0}>\n          Apply Changes\n        </Button>\n      </Box>\n    </Paper>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1527, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/VisualizationPanel.tsx"],"sourcesContent":["'use client';\n\nimport { Box, Paper, Typography, ButtonGroup, Button } from '@mui/material';\nimport { useState } from 'react';\nimport ShowChartIcon from '@mui/icons-material/ShowChart';\nimport GridOnIcon from '@mui/icons-material/GridOn';\nimport ViewInArIcon from '@mui/icons-material/ViewInAr';\n\ntype VizType = 'chart' | 'table' | '3d';\n\ninterface VisualizationPanelProps {\n  data?: unknown;\n}\n\nexport function VisualizationPanel({ data }: VisualizationPanelProps) {\n  const [vizType, setVizType] = useState<VizType>('chart');\n\n  return (\n    <Paper\n      elevation={2}\n      sx={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          p: 2,\n          borderBottom: 1,\n          borderColor: 'divider',\n          bgcolor: 'info.main',\n          color: 'info.contrastText',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <Box>\n          <Typography variant=\"h6\" fontWeight=\"bold\">\n            üìä Visualization\n          </Typography>\n          <Typography variant=\"caption\">\n            Interactive design space\n          </Typography>\n        </Box>\n        <ButtonGroup size=\"small\" variant=\"outlined\" sx={{ bgcolor: 'white' }}>\n          <Button\n            onClick={() => setVizType('chart')}\n            variant={vizType === 'chart' ? 'contained' : 'outlined'}\n          >\n            <ShowChartIcon fontSize=\"small\" />\n          </Button>\n          <Button\n            onClick={() => setVizType('table')}\n            variant={vizType === 'table' ? 'contained' : 'outlined'}\n          >\n            <GridOnIcon fontSize=\"small\" />\n          </Button>\n          <Button\n            onClick={() => setVizType('3d')}\n            variant={vizType === '3d' ? 'contained' : 'outlined'}\n          >\n            <ViewInArIcon fontSize=\"small\" />\n          </Button>\n        </ButtonGroup>\n      </Box>\n\n      {/* Visualization Area */}\n      <Box\n        sx={{\n          flex: 1,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          p: 3,\n          bgcolor: 'grey.50',\n        }}\n      >\n        {vizType === 'chart' && (\n          <Box textAlign=\"center\">\n            <ShowChartIcon sx={{ fontSize: 80, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"h6\" color=\"text.secondary\">\n              Chart Visualization\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Will display optimization design space\n            </Typography>\n            {data !== undefined && data !== null && (\n              <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                Data loaded\n              </Typography>\n            )}\n          </Box>\n        )}\n\n        {vizType === 'table' && (\n          <Box textAlign=\"center\">\n            <GridOnIcon sx={{ fontSize: 80, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"h6\" color=\"text.secondary\">\n              Table View\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Tabular data display\n            </Typography>\n          </Box>\n        )}\n\n        {vizType === '3d' && (\n          <Box textAlign=\"center\">\n            <ViewInArIcon sx={{ fontSize: 80, color: 'text.secondary', mb: 2 }} />\n            <Typography variant=\"h6\" color=\"text.secondary\">\n              3D Visualization\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Interactive 3D design space\n            </Typography>\n          </Box>\n        )}\n      </Box>\n\n      {/* Info Footer */}\n      <Box sx={{ p: 2, borderTop: 1, borderColor: 'divider', bgcolor: 'grey.50' }}>\n        <Typography variant=\"caption\" color=\"text.secondary\">\n          üí° Tip: Click and drag to manipulate design points directly\n        </Typography>\n      </Box>\n    </Paper>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAcO,SAAS,mBAAmB,EAAE,IAAI,EAA2B;;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAEhD,qBACE,6LAAC,0MAAK;QACJ,WAAW;QACX,IAAI;YACF,QAAQ;YACR,SAAS;YACT,eAAe;YACf,UAAU;QACZ;;0BAGA,6LAAC,kMAAG;gBACF,IAAI;oBACF,GAAG;oBACH,cAAc;oBACd,aAAa;oBACb,SAAS;oBACT,OAAO;oBACP,SAAS;oBACT,gBAAgB;oBAChB,YAAY;gBACd;;kCAEA,6LAAC,kMAAG;;0CACF,6LAAC,8NAAU;gCAAC,SAAQ;gCAAK,YAAW;0CAAO;;;;;;0CAG3C,6LAAC,8NAAU;gCAAC,SAAQ;0CAAU;;;;;;;;;;;;kCAIhC,6LAAC,kOAAW;wBAAC,MAAK;wBAAQ,SAAQ;wBAAW,IAAI;4BAAE,SAAS;wBAAQ;;0CAClE,6LAAC,8MAAM;gCACL,SAAS,IAAM,WAAW;gCAC1B,SAAS,YAAY,UAAU,cAAc;0CAE7C,cAAA,6LAAC,4KAAa;oCAAC,UAAS;;;;;;;;;;;0CAE1B,6LAAC,8MAAM;gCACL,SAAS,IAAM,WAAW;gCAC1B,SAAS,YAAY,UAAU,cAAc;0CAE7C,cAAA,6LAAC,yKAAU;oCAAC,UAAS;;;;;;;;;;;0CAEvB,6LAAC,8MAAM;gCACL,SAAS,IAAM,WAAW;gCAC1B,SAAS,YAAY,OAAO,cAAc;0CAE1C,cAAA,6LAAC,2KAAY;oCAAC,UAAS;;;;;;;;;;;;;;;;;;;;;;;0BAM7B,6LAAC,kMAAG;gBACF,IAAI;oBACF,MAAM;oBACN,SAAS;oBACT,YAAY;oBACZ,gBAAgB;oBAChB,GAAG;oBACH,SAAS;gBACX;;oBAEC,YAAY,yBACX,6LAAC,kMAAG;wBAAC,WAAU;;0CACb,6LAAC,4KAAa;gCAAC,IAAI;oCAAE,UAAU;oCAAI,OAAO;oCAAkB,IAAI;gCAAE;;;;;;0CAClE,6LAAC,8NAAU;gCAAC,SAAQ;gCAAK,OAAM;0CAAiB;;;;;;0CAGhD,6LAAC,8NAAU;gCAAC,SAAQ;gCAAQ,OAAM;0CAAiB;;;;;;4BAGlD,SAAS,aAAa,SAAS,sBAC9B,6LAAC,8NAAU;gCAAC,SAAQ;gCAAU,SAAQ;gCAAQ,IAAI;oCAAE,IAAI;gCAAE;0CAAG;;;;;;;;;;;;oBAOlE,YAAY,yBACX,6LAAC,kMAAG;wBAAC,WAAU;;0CACb,6LAAC,yKAAU;gCAAC,IAAI;oCAAE,UAAU;oCAAI,OAAO;oCAAkB,IAAI;gCAAE;;;;;;0CAC/D,6LAAC,8NAAU;gCAAC,SAAQ;gCAAK,OAAM;0CAAiB;;;;;;0CAGhD,6LAAC,8NAAU;gCAAC,SAAQ;gCAAQ,OAAM;0CAAiB;;;;;;;;;;;;oBAMtD,YAAY,sBACX,6LAAC,kMAAG;wBAAC,WAAU;;0CACb,6LAAC,2KAAY;gCAAC,IAAI;oCAAE,UAAU;oCAAI,OAAO;oCAAkB,IAAI;gCAAE;;;;;;0CACjE,6LAAC,8NAAU;gCAAC,SAAQ;gCAAK,OAAM;0CAAiB;;;;;;0CAGhD,6LAAC,8NAAU;gCAAC,SAAQ;gCAAQ,OAAM;0CAAiB;;;;;;;;;;;;;;;;;;0BAQzD,6LAAC,kMAAG;gBAAC,IAAI;oBAAE,GAAG;oBAAG,WAAW;oBAAG,aAAa;oBAAW,SAAS;gBAAU;0BACxE,cAAA,6LAAC,8NAAU;oBAAC,SAAQ;oBAAU,OAAM;8BAAiB;;;;;;;;;;;;;;;;;AAM7D;GArHgB;KAAA"}},
    {"offset": {"line": 1843, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/OptimizationPanel.tsx"],"sourcesContent":["'use client';\n\nimport {\n  Box,\n  Paper,\n  Typography,\n  Button,\n  LinearProgress,\n  Chip,\n  Stack,\n  Divider,\n} from '@mui/material';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport PauseIcon from '@mui/icons-material/Pause';\nimport StopIcon from '@mui/icons-material/Stop';\nimport RestartAltIcon from '@mui/icons-material/RestartAlt';\nimport { useState } from 'react';\n\ntype OptimizationStatus = 'idle' | 'running' | 'paused' | 'completed' | 'error';\n\ninterface OptimizationPanelProps {\n  onStart?: () => void;\n  onPause?: () => void;\n  onStop?: () => void;\n  onReset?: () => void;\n}\n\nexport function OptimizationPanel({ onStart, onPause, onStop, onReset }: OptimizationPanelProps) {\n  const [status, setStatus] = useState<OptimizationStatus>('idle');\n  const [iteration, setIteration] = useState(0);\n  const [maxIterations] = useState(1000);\n  const [bestScore, setBestScore] = useState<number | null>(null);\n  const [logs, setLogs] = useState<string[]>([]);\n\n  const handleStart = () => {\n    setStatus('running');\n    setLogs((prev) => [...prev, `[${new Date().toLocaleTimeString()}] Optimization started`]);\n    // Simulate progress\n    let iter = 0;\n    const interval = setInterval(() => {\n      iter += 10;\n      setIteration(iter);\n      setBestScore(Math.random() * 100);\n      setLogs((prev) => [...prev, `Iteration ${iter}: Score = ${(Math.random() * 100).toFixed(2)}`]);\n      if (iter >= maxIterations) {\n        clearInterval(interval);\n        setStatus('completed');\n        setLogs((prev) => [...prev, `[${new Date().toLocaleTimeString()}] Optimization completed`]);\n      }\n    }, 100);\n    onStart?.();\n  };\n\n  const handlePause = () => {\n    setStatus('paused');\n    setLogs((prev) => [...prev, `[${new Date().toLocaleTimeString()}] Optimization paused`]);\n    onPause?.();\n  };\n\n  const handleStop = () => {\n    setStatus('idle');\n    setLogs((prev) => [...prev, `[${new Date().toLocaleTimeString()}] Optimization stopped`]);\n    onStop?.();\n  };\n\n  const handleReset = () => {\n    setStatus('idle');\n    setIteration(0);\n    setBestScore(null);\n    setLogs([]);\n    onReset?.();\n  };\n\n  const getStatusColor = () => {\n    switch (status) {\n      case 'running':\n        return 'success';\n      case 'paused':\n        return 'warning';\n      case 'completed':\n        return 'info';\n      case 'error':\n        return 'error';\n      default:\n        return 'default';\n    }\n  };\n\n  return (\n    <Paper\n      elevation={2}\n      sx={{\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      {/* Header */}\n      <Box\n        sx={{\n          p: 2,\n          borderBottom: 1,\n          borderColor: 'divider',\n          bgcolor: 'success.main',\n          color: 'success.contrastText',\n        }}\n      >\n        <Typography variant=\"h6\" fontWeight=\"bold\">\n          ‚ö° Optimization\n        </Typography>\n        <Typography variant=\"caption\">\n          Status & monitoring\n        </Typography>\n      </Box>\n\n      {/* Status */}\n      <Box sx={{ p: 2 }}>\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 2 }}>\n          <Typography variant=\"subtitle2\">Status:</Typography>\n          <Chip\n            label={status.toUpperCase()}\n            color={getStatusColor()}\n            size=\"small\"\n          />\n        </Stack>\n\n        <Box sx={{ mb: 2 }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n            <Typography variant=\"body2\">\n              Iteration: {iteration} / {maxIterations}\n            </Typography>\n            <Typography variant=\"body2\">\n              {((iteration / maxIterations) * 100).toFixed(0)}%\n            </Typography>\n          </Box>\n          <LinearProgress\n            variant=\"determinate\"\n            value={(iteration / maxIterations) * 100}\n            sx={{ height: 8, borderRadius: 1 }}\n          />\n        </Box>\n\n        {bestScore !== null && (\n          <Box\n            sx={{\n              p: 2,\n              bgcolor: 'success.light',\n              borderRadius: 1,\n              mb: 2,\n            }}\n          >\n            <Typography variant=\"caption\" color=\"success.dark\">\n              Best Score\n            </Typography>\n            <Typography variant=\"h4\" color=\"success.dark\" fontWeight=\"bold\">\n              {bestScore.toFixed(4)}\n            </Typography>\n          </Box>\n        )}\n\n        <Divider />\n      </Box>\n\n      {/* Controls */}\n      <Box sx={{ p: 2 }}>\n        <Stack direction=\"row\" spacing={1}>\n          {status === 'idle' || status === 'paused' || status === 'completed' ? (\n            <Button\n              variant=\"contained\"\n              color=\"success\"\n              startIcon={<PlayArrowIcon />}\n              onClick={handleStart}\n              fullWidth\n            >\n              {status === 'paused' ? 'Resume' : 'Start'}\n            </Button>\n          ) : (\n            <Button\n              variant=\"contained\"\n              color=\"warning\"\n              startIcon={<PauseIcon />}\n              onClick={handlePause}\n              fullWidth\n            >\n              Pause\n            </Button>\n          )}\n          <Button\n            variant=\"outlined\"\n            color=\"error\"\n            startIcon={<StopIcon />}\n            onClick={handleStop}\n            disabled={status === 'idle'}\n          >\n            Stop\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<RestartAltIcon />}\n            onClick={handleReset}\n          >\n            Reset\n          </Button>\n        </Stack>\n      </Box>\n\n      <Divider />\n\n      {/* Logs */}\n      <Box sx={{ flex: 1, overflowY: 'auto', p: 2 }}>\n        <Typography variant=\"subtitle2\" gutterBottom>\n          üìã Logs\n        </Typography>\n        <Box\n          sx={{\n            fontFamily: 'monospace',\n            fontSize: 12,\n            bgcolor: 'grey.100',\n            p: 1,\n            borderRadius: 1,\n            maxHeight: 200,\n            overflowY: 'auto',\n          }}\n        >\n          {logs.length === 0 ? (\n            <Typography variant=\"caption\" color=\"text.secondary\">\n              No logs yet. Start optimization to see progress.\n            </Typography>\n          ) : (\n            logs.slice(-20).map((log, idx) => (\n              <Box key={idx} sx={{ mb: 0.5 }}>\n                {log}\n              </Box>\n            ))\n          )}\n        </Box>\n      </Box>\n    </Paper>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2280, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/AIProviderSettings.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button,\n    TextField,\n    Select,\n    MenuItem,\n    FormControl,\n    InputLabel,\n    IconButton,\n    InputAdornment,\n    Alert,\n    CircularProgress,\n    Box,\n} from '@mui/material';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport { useAIProvider } from '../contexts/AIProviderContext';\nimport type { AIProvider, ProvidersResponse } from '../services/ai';\n\ninterface AIProviderSettingsProps {\n    open: boolean;\n    onClose: () => void;\n}\n\nexport const AIProviderSettings: React.FC<AIProviderSettingsProps> = ({ open, onClose }) => {\n    const { state, connect } = useAIProvider();\n    const [provider, setProvider] = useState<AIProvider>('google');\n    const [apiKey, setApiKey] = useState('');\n    const [model, setModel] = useState('');\n    const [endpoint, setEndpoint] = useState('');\n    const [showApiKey, setShowApiKey] = useState(false);\n    const [isConnecting, setIsConnecting] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [success, setSuccess] = useState(false);\n    \n    // Static provider configuration (no backend needed)\n    const staticProviders: ProvidersResponse = {\n        providers: {\n            google: {\n                name: 'Google (Gemini)',\n                models: ['gemini-2.5-flash', 'gemini-2.0-flash', 'gemini-2.5-flash-lite', 'gemini-1.5-flash', 'gemini-1.5-pro'],\n                requires_api_key: true,\n                endpoint: null,\n            },\n            openai: {\n                name: 'OpenAI',\n                models: ['gpt-4o', 'gpt-4o-mini', 'gpt-4-turbo', 'gpt-3.5-turbo'],\n                requires_api_key: true,\n                endpoint: null,\n            },\n            anthropic: {\n                name: 'Anthropic (Claude)',\n                models: ['claude-3-5-sonnet-20241022', 'claude-3-opus-20240229', 'claude-3-sonnet-20240229'],\n                requires_api_key: true,\n                endpoint: null,\n            },\n            ollama: {\n                name: 'Ollama (Local)',\n                models: ['llama2', 'mistral', 'codellama', 'phi'],\n                requires_api_key: false,\n                endpoint: 'http://localhost:11434',\n            },\n            custom: {\n                name: 'Custom Endpoint',\n                models: ['custom-model'],\n                requires_api_key: true,\n                endpoint: null,\n            },\n        },\n    };\n\n    // Load saved config when dialog opens\n    useEffect(() => {\n        if (open && state.provider) {\n            setProvider(state.provider);\n            setApiKey(state.apiKey || '');\n            setModel(state.model || staticProviders.providers[state.provider]?.models[0] || '');\n            setEndpoint(state.endpoint || '');\n        } else if (open) {\n            // Set default model for initial provider\n            const defaultModel = staticProviders.providers[provider]?.models[0];\n            if (defaultModel && !model) {\n                setModel(defaultModel);\n            }\n        }\n    }, [open, state]);\n\n    // Update default model when provider changes\n    useEffect(() => {\n        const providerInfo = staticProviders.providers[provider];\n        if (providerInfo) {\n            if (providerInfo.models.length > 0 && !model) {\n                setModel(providerInfo.models[0]);\n            }\n            if (providerInfo.endpoint && !endpoint) {\n                setEndpoint(providerInfo.endpoint);\n            }\n        }\n    }, [provider]);\n\n    const handleConnect = async () => {\n        setError(null);\n        setSuccess(false);\n        setIsConnecting(true);\n\n        const connected = await connect(provider, apiKey, model, endpoint || undefined);\n\n        setIsConnecting(false);\n\n        if (connected) {\n            setSuccess(true);\n            setTimeout(() => {\n                onClose();\n                setSuccess(false);\n            }, 1500);\n        } else {\n            setError(state.errorMessage || 'Connection failed');\n        }\n    };\n\n    const requiresApiKey = staticProviders.providers[provider]?.requires_api_key !== false;\n    const requiresEndpoint = provider === 'ollama' || provider === 'custom';\n\n    return (\n        <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n            <DialogTitle>AI Provider Settings</DialogTitle>\n            <DialogContent>\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\n                    {/* Security Warning */}\n                    <Alert severity=\"warning\">\n                        API keys are stored locally in your browser. Never share your keys with others.\n                    </Alert>\n\n                    {/* Provider Selection */}\n                    <FormControl fullWidth>\n                        <InputLabel>Provider</InputLabel>\n                        <Select\n                            value={provider}\n                            label=\"Provider\"\n                            onChange={(e) => setProvider(e.target.value as AIProvider)}\n                        >\n                            <MenuItem value=\"google\">Google Gemini</MenuItem>\n                            <MenuItem value=\"openai\" disabled sx={{ color: 'text.disabled' }}>\n                                OpenAI (Not Available)\n                            </MenuItem>\n                            <MenuItem value=\"anthropic\" disabled sx={{ color: 'text.disabled' }}>\n                                Anthropic Claude (Not Available)\n                            </MenuItem>\n                            <MenuItem value=\"ollama\" disabled sx={{ color: 'text.disabled' }}>\n                                Ollama (Not Available)\n                            </MenuItem>\n                            <MenuItem value=\"custom\" disabled sx={{ color: 'text.disabled' }}>\n                                Custom Endpoint (Not Available)\n                            </MenuItem>\n                        </Select>\n                    </FormControl>\n\n                    {/* Model Selection */}\n                    <FormControl fullWidth>\n                        <InputLabel>Model</InputLabel>\n                        <Select\n                            value={model}\n                            label=\"Model\"\n                            onChange={(e) => setModel(e.target.value)}\n                        >\n                            {staticProviders.providers[provider]?.models.map((m: string) => (\n                                <MenuItem key={m} value={m}>{m}</MenuItem>\n                            ))}\n                            {staticProviders.providers[provider]?.models.length === 0 && (\n                                <MenuItem value=\"\">Enter custom model name below</MenuItem>\n                            )}\n                        </Select>\n                    </FormControl>\n\n                    {/* Custom model name if list is empty */}\n                    {staticProviders.providers[provider]?.models.length === 0 && (\n                        <TextField\n                            fullWidth\n                            label=\"Model Name\"\n                            value={model}\n                            onChange={(e) => setModel(e.target.value)}\n                            placeholder=\"e.g., gpt-4\"\n                        />\n                    )}\n\n                    {/* API Key */}\n                    {requiresApiKey && (\n                        <TextField\n                            fullWidth\n                            label=\"API Key\"\n                            type={showApiKey ? 'text' : 'password'}\n                            value={apiKey}\n                            onChange={(e) => setApiKey(e.target.value)}\n                            placeholder={`Enter your ${staticProviders.providers[provider]?.name || 'API'} key`}\n                            InputProps={{\n                                endAdornment: (\n                                    <InputAdornment position=\"end\">\n                                        <IconButton\n                                            onClick={() => setShowApiKey(!showApiKey)}\n                                            edge=\"end\"\n                                        >\n                                            {showApiKey ? <VisibilityOff /> : <Visibility />}\n                                        </IconButton>\n                                    </InputAdornment>\n                                ),\n                            }}\n                        />\n                    )}\n\n                    {/* Endpoint URL */}\n                    {requiresEndpoint && (\n                        <TextField\n                            fullWidth\n                            label=\"Endpoint URL\"\n                            value={endpoint}\n                            onChange={(e) => setEndpoint(e.target.value)}\n                            placeholder={\n                                provider === 'ollama'\n                                    ? 'http://localhost:11434'\n                                    : 'https://your-endpoint.com'\n                            }\n                        />\n                    )}\n\n                    {/* Error Message */}\n                    {error && (\n                        <Alert severity=\"error\">{error}</Alert>\n                    )}\n\n                    {/* Success Message */}\n                    {success && (\n                        <Alert severity=\"success\">Successfully connected!</Alert>\n                    )}\n\n                    {/* Current Status */}\n                    {state.status === 'connected' && (\n                        <Alert severity=\"info\">\n                            Currently connected to {state.provider} - {state.model}\n                        </Alert>\n                    )}\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={onClose}>Cancel</Button>\n                <Button\n                    onClick={handleConnect}\n                    variant=\"contained\"\n                    disabled={\n                        isConnecting ||\n                        !provider ||\n                        !model ||\n                        (requiresApiKey && !apiKey) ||\n                        (requiresEndpoint && !endpoint)\n                    }\n                    startIcon={isConnecting && <CircularProgress size={20} />}\n                >\n                    {isConnecting ? 'Connecting...' : 'Connect'}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2744, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/components/AIConnectionStatus.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n    Box,\n    Chip,\n    IconButton,\n    Tooltip,\n} from '@mui/material';\nimport {\n    Settings as SettingsIcon,\n    CheckCircle as CheckCircleIcon,\n    Error as ErrorIcon,\n    Cancel as CancelIcon,\n} from '@mui/icons-material';\nimport { useAIProvider } from '../contexts/AIProviderContext';\nimport { AIProviderSettings } from './AIProviderSettings';\n\nexport const AIConnectionStatus: React.FC = () => {\n    const { state, disconnect, isConnected } = useAIProvider();\n    const [settingsOpen, setSettingsOpen] = useState(false);\n\n    const getStatusColor = () => {\n        switch (state.status) {\n            case 'connected':\n                return 'success';\n            case 'connecting':\n                return 'info';\n            case 'error':\n                return 'error';\n            default:\n                return 'default';\n        }\n    };\n\n    const getStatusIcon = () => {\n        switch (state.status) {\n            case 'connected':\n                return <CheckCircleIcon fontSize=\"small\" />;\n            case 'error':\n                return <ErrorIcon fontSize=\"small\" />;\n            default:\n                return null;\n        }\n    };\n\n    const getStatusLabel = () => {\n        if (isConnected) {\n            return `${state.provider}: ${state.model}`;\n        }\n        if (state.status === 'connecting') {\n            return 'Connecting...';\n        }\n        if (state.status === 'error') {\n            return 'Connection Failed';\n        }\n        return 'No AI Connected';\n    };\n\n    return (\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n            <Chip\n                label={getStatusLabel()}\n                color={getStatusColor()}\n                size=\"medium\"\n                icon={getStatusIcon() || undefined}\n                onClick={() => setSettingsOpen(true)}\n                sx={{ \n                    cursor: 'pointer',\n                    fontSize: '0.95rem',\n                    fontWeight: 500,\n                    color: '#ffffff',\n                    '& .MuiChip-label': {\n                        px: 2,\n                    },\n                    '& .MuiChip-icon': {\n                        color: '#ffffff',\n                    },\n                    backgroundColor: state.status === 'connected' ? 'rgba(76, 175, 80, 0.9)' : \n                                   state.status === 'error' ? 'rgba(244, 67, 54, 0.9)' : \n                                   state.status === 'connecting' ? 'rgba(33, 150, 243, 0.9)' : \n                                   'rgba(158, 158, 158, 0.7)',\n                    '&:hover': {\n                        backgroundColor: state.status === 'connected' ? 'rgba(76, 175, 80, 1)' : \n                                       state.status === 'error' ? 'rgba(244, 67, 54, 1)' : \n                                       state.status === 'connecting' ? 'rgba(33, 150, 243, 1)' : \n                                       'rgba(158, 158, 158, 0.9)',\n                    }\n                }}\n            />\n            \n            {isConnected && (\n                <Tooltip title=\"Disconnect\">\n                    <IconButton\n                        size=\"small\"\n                        onClick={disconnect}\n                        sx={{ ml: -0.5 }}\n                    >\n                        <CancelIcon fontSize=\"small\" />\n                    </IconButton>\n                </Tooltip>\n            )}\n\n            {!isConnected && (\n                <Tooltip title=\"AI Settings\">\n                    <IconButton\n                        size=\"small\"\n                        onClick={() => setSettingsOpen(true)}\n                        color=\"primary\"\n                    >\n                        <SettingsIcon fontSize=\"small\" />\n                    </IconButton>\n                </Tooltip>\n            )}\n\n            <AIProviderSettings\n                open={settingsOpen}\n                onClose={() => setSettingsOpen(false)}\n            />\n        </Box>\n    );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAMA;AACA;;;;;;;;;;;AAEO,MAAM,qBAA+B;;IACxC,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,IAAA,yJAAa;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,iBAAiB;QACnB,OAAQ,MAAM,MAAM;YAChB,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX,KAAK;gBACD,OAAO;YACX;gBACI,OAAO;QACf;IACJ;IAEA,MAAM,gBAAgB;QAClB,OAAQ,MAAM,MAAM;YAChB,KAAK;gBACD,qBAAO,6LAAC,8KAAe;oBAAC,UAAS;;;;;;YACrC,KAAK;gBACD,qBAAO,6LAAC,wKAAS;oBAAC,UAAS;;;;;;YAC/B;gBACI,OAAO;QACf;IACJ;IAEA,MAAM,iBAAiB;QACnB,IAAI,aAAa;YACb,OAAO,GAAG,MAAM,QAAQ,CAAC,EAAE,EAAE,MAAM,KAAK,EAAE;QAC9C;QACA,IAAI,MAAM,MAAM,KAAK,cAAc;YAC/B,OAAO;QACX;QACA,IAAI,MAAM,MAAM,KAAK,SAAS;YAC1B,OAAO;QACX;QACA,OAAO;IACX;IAEA,qBACI,6LAAC,kMAAG;QAAC,IAAI;YAAE,SAAS;YAAQ,YAAY;YAAU,KAAK;QAAE;;0BACrD,6LAAC,sMAAI;gBACD,OAAO;gBACP,OAAO;gBACP,MAAK;gBACL,MAAM,mBAAmB;gBACzB,SAAS,IAAM,gBAAgB;gBAC/B,IAAI;oBACA,QAAQ;oBACR,UAAU;oBACV,YAAY;oBACZ,OAAO;oBACP,oBAAoB;wBAChB,IAAI;oBACR;oBACA,mBAAmB;wBACf,OAAO;oBACX;oBACA,iBAAiB,MAAM,MAAM,KAAK,cAAc,2BACjC,MAAM,MAAM,KAAK,UAAU,2BAC3B,MAAM,MAAM,KAAK,eAAe,4BAChC;oBACf,WAAW;wBACP,iBAAiB,MAAM,MAAM,KAAK,cAAc,yBACjC,MAAM,MAAM,KAAK,UAAU,yBAC3B,MAAM,MAAM,KAAK,eAAe,0BAChC;oBACnB;gBACJ;;;;;;YAGH,6BACG,6LAAC,kNAAO;gBAAC,OAAM;0BACX,cAAA,6LAAC,8NAAU;oBACP,MAAK;oBACL,SAAS;oBACT,IAAI;wBAAE,IAAI,CAAC;oBAAI;8BAEf,cAAA,6LAAC,yKAAU;wBAAC,UAAS;;;;;;;;;;;;;;;;YAKhC,CAAC,6BACE,6LAAC,kNAAO;gBAAC,OAAM;0BACX,cAAA,6LAAC,8NAAU;oBACP,MAAK;oBACL,SAAS,IAAM,gBAAgB;oBAC/B,OAAM;8BAEN,cAAA,6LAAC,2KAAY;wBAAC,UAAS;;;;;;;;;;;;;;;;0BAKnC,6LAAC,iKAAkB;gBACf,MAAM;gBACN,SAAS,IAAM,gBAAgB;;;;;;;;;;;;AAI/C;GAvGa;;QACkC,yJAAa;;;KAD/C"}},
    {"offset": {"line": 2932, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { Box, AppBar, Toolbar, Typography } from '@mui/material';\nimport { ChatPanel } from '../src/components/ChatPanel';\nimport { ControlsPanel } from '../src/components/ControlsPanel';\nimport { VisualizationPanel } from '../src/components/VisualizationPanel';\nimport { OptimizationPanel } from '../src/components/OptimizationPanel';\nimport { AIConnectionStatus } from '../src/components/AIConnectionStatus';\nimport { useState, useEffect } from 'react';\n\nexport default function HomePage() {\n  const [generatedControls, setGeneratedControls] = useState<unknown>(null);\n\n  const handleControlsGenerated = (controls: unknown) => {\n    console.log('[HomePage] Controls generated:', controls);\n    setGeneratedControls(controls);\n  };\n\n  // Initialize gradient visibility on mount\n  useEffect(() => {\n    const leftMask = document.querySelector('.gradient-left') as HTMLElement;\n    if (leftMask) {\n      leftMask.style.opacity = '0'; // Start with left hidden since we're at the left edge\n    }\n  }, []);\n\n  return (\n    <Box sx={{ display: 'flex', flexDirection: 'column', height: '100vh', bgcolor: '#f5f5f5', overflow: 'hidden' }}>\n      {/* Top App Bar - Fixed width, doesn't scroll */}\n      <AppBar position=\"static\" sx={{ flexShrink: 0, width: '100vw' }}>\n        <Toolbar>\n          <Box sx={{ flex: 1 }} />\n          <Typography variant=\"h4\" component=\"h1\" sx={{ fontWeight: 'bold' }}>\n            AI OPTIMISM TOOLKIT\n          </Typography>\n          <Box sx={{ flex: 1, display: 'flex', justifyContent: 'flex-end' }}>\n            <AIConnectionStatus />\n          </Box>\n        </Toolbar>\n      </AppBar>\n\n      {/* 4-Panel Layout - Scrollable horizontally with gradient masks */}\n      <Box\n        sx={{\n          flex: 1,\n          position: 'relative',\n          minHeight: 0,\n          overflow: 'hidden', // Container doesn't scroll\n        }}\n      >\n        {/* Left gradient mask */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            width: '120px',\n            background: 'linear-gradient(to right, rgba(0, 0, 0, 0.15) 0%, rgba(0, 0, 0, 0) 100%)',\n            pointerEvents: 'none',\n            zIndex: 2,\n            transition: 'opacity 0.3s',\n          }}\n          className=\"gradient-left\"\n        />\n        \n        {/* Right gradient mask */}\n        <Box\n          sx={{\n            position: 'absolute',\n            top: 0,\n            right: 0,\n            bottom: 0,\n            width: '120px',\n            background: 'linear-gradient(to left, rgba(0, 0, 0, 0.15) 0%, rgba(0, 0, 0, 0) 100%)',\n            pointerEvents: 'none',\n            zIndex: 2,\n            transition: 'opacity 0.3s',\n          }}\n          className=\"gradient-right\"\n        />\n\n        {/* Scrollable content */}\n        <Box\n          sx={{\n            overflowX: 'auto',\n            overflowY: 'hidden',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n          onScroll={(e) => {\n            const target = e.currentTarget;\n            const scrollLeft = target.scrollLeft;\n            const maxScroll = target.scrollWidth - target.clientWidth;\n            \n            // Show/hide gradient masks based on scroll position\n            const leftMask = document.querySelector('.gradient-left') as HTMLElement;\n            const rightMask = document.querySelector('.gradient-right') as HTMLElement;\n            \n            if (leftMask) {\n              leftMask.style.opacity = scrollLeft > 10 ? '1' : '0';\n            }\n            if (rightMask) {\n              rightMask.style.opacity = scrollLeft < maxScroll - 10 ? '1' : '0';\n            }\n          }}\n        >\n          <Box\n            sx={{\n              display: 'grid',\n              gridTemplateColumns: {\n                xs: '1fr',\n                md: '600px 600px 600px 600px', // All panels are 600px\n              },\n              gap: 2,\n              flex: 1,\n              minHeight: 0,\n              pl: 2, // Left padding\n              pr: 2, // Right padding\n              pt: 2, // Top padding\n              pb: 2, // Bottom padding\n              // Add extra width to ensure right padding is visible\n              width: 'fit-content',\n            }}\n          >\n          {/* Panel 1: Chat */}\n          <Box sx={{ height: '100%', overflow: 'hidden' }}>\n            <ChatPanel onControlsGenerated={handleControlsGenerated} />\n          </Box>\n\n          {/* Panel 2: Controls */}\n          <Box sx={{ height: '100%', overflow: 'hidden' }}>\n            <ControlsPanel controls={generatedControls} />\n          </Box>\n\n          {/* Panel 3: Visualization */}\n          <Box sx={{ height: '100%', overflow: 'hidden' }}>\n            <VisualizationPanel />\n          </Box>\n\n          {/* Panel 4: Optimization */}\n          <Box sx={{ height: '100%', overflow: 'hidden' }}>\n            <OptimizationPanel />\n          </Box>\n        </Box>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}