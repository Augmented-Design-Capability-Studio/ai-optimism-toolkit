{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/services/ai.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = '/api';\n\nexport type AIProvider = 'openai' | 'anthropic' | 'google' | 'ollama' | 'custom';\n\nexport interface AIProviderConfig {\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n  temperature?: number;\n  max_tokens?: number;\n}\n\nexport interface AIValidationRequest {\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n}\n\nexport interface AIValidationResponse {\n  status: 'success' | 'error';\n  message: string;\n  provider: string;\n  model: string;\n  details?: any;\n}\n\nexport interface AIProviderInfo {\n  name: string;\n  models: string[];\n  requires_api_key: boolean;\n  endpoint: string | null;\n}\n\nexport interface ProvidersResponse {\n  providers: Record<AIProvider, AIProviderInfo>;\n}\n\nexport interface GenerateVariablesRequest {\n  problem_name: string;\n  description?: string;\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n}\n\nexport interface GeneratedVariable {\n  name: string;\n  type: 'numerical' | 'categorical';\n  min?: number;\n  max?: number;\n  unit?: string;\n  categories?: string[];\n  modifier_strategy?: 'cycle' | 'random';\n  reasoning?: string;\n}\n\nexport interface GenerateVariablesResponse {\n  status: 'success' | 'error';\n  message: string;\n  variables?: GeneratedVariable[];\n}\n\nexport interface GeneratePropertiesRequest {\n  problem_name: string;\n  description?: string;\n  variables: GeneratedVariable[];\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n}\n\nexport interface GeneratedProperty {\n  name: string;\n  expression: string;\n  description: string;\n}\n\nexport interface GeneratePropertiesResponse {\n  status: 'success' | 'error';\n  message: string;\n  properties?: GeneratedProperty[];\n}\n\nexport interface GenerateObjectiveRequest {\n  problem_name: string;\n  description: string;\n  objective_description: string;\n  variables: GeneratedVariable[];\n  properties?: GeneratedProperty[];\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n}\n\nexport interface GenerateObjectiveResponse {\n  status: 'success' | 'error';\n  message: string;\n  code?: string;\n  explanation?: string;\n}\n\nexport interface GenerateConstraintsRequest {\n  problem_name: string;\n  description?: string;\n  variables: GeneratedVariable[];\n  properties?: GeneratedProperty[];\n  provider: AIProvider;\n  api_key: string;\n  model: string;\n  endpoint?: string;\n}\n\nexport interface GeneratedConstraint {\n  expression: string;\n  description: string;\n}\n\nexport interface GenerateConstraintsResponse {\n  status: 'success' | 'error';\n  message: string;\n  constraints?: GeneratedConstraint[];\n}\n\nconst aiApi = {\n  // Validate AI provider connection\n  validateConnection: async (request: AIValidationRequest): Promise<AIValidationResponse> => {\n    const response = await axios.post(`${API_URL}/ai/validate-connection/`, request);\n    return response.data;\n  },\n\n  // Get list of available providers and their models\n  listProviders: async (): Promise<ProvidersResponse> => {\n    const response = await axios.get(`${API_URL}/ai/providers/`);\n    return response.data;\n  },\n\n  // Generate variable suggestions using AI\n  generateVariables: async (request: GenerateVariablesRequest): Promise<GenerateVariablesResponse> => {\n    const response = await axios.post(`${API_URL}/ai/generate-variables/`, request);\n    return response.data;\n  },\n\n  // Generate computed properties based on variables\n  generateProperties: async (request: GeneratePropertiesRequest): Promise<GeneratePropertiesResponse> => {\n    const response = await axios.post(`${API_URL}/ai/generate-properties/`, request);\n    return response.data;\n  },\n\n  // Generate objective function code from description\n  generateObjective: async (request: GenerateObjectiveRequest): Promise<GenerateObjectiveResponse> => {\n    const response = await axios.post(`${API_URL}/ai/generate-objective/`, request);\n    return response.data;\n  },\n\n  // Generate constraint expressions\n  generateConstraints: async (request: GenerateConstraintsRequest): Promise<GenerateConstraintsResponse> => {\n    const response = await axios.post(`${API_URL}/ai/generate-constraints/`, request);\n    return response.data;\n  }\n};\n\nexport default aiApi;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;AAgIhB,MAAM,QAAQ;IACZ,kCAAkC;IAClC,oBAAoB,OAAO;QACzB,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,wBAAwB,CAAC,EAAE;QACxE,OAAO,SAAS,IAAI;IACtB;IAEA,mDAAmD;IACnD,eAAe;QACb,MAAM,WAAW,MAAM,mJAAK,CAAC,GAAG,CAAC,GAAG,QAAQ,cAAc,CAAC;QAC3D,OAAO,SAAS,IAAI;IACtB;IAEA,yCAAyC;IACzC,mBAAmB,OAAO;QACxB,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,uBAAuB,CAAC,EAAE;QACvE,OAAO,SAAS,IAAI;IACtB;IAEA,kDAAkD;IAClD,oBAAoB,OAAO;QACzB,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,wBAAwB,CAAC,EAAE;QACxE,OAAO,SAAS,IAAI;IACtB;IAEA,oDAAoD;IACpD,mBAAmB,OAAO;QACxB,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,uBAAuB,CAAC,EAAE;QACvE,OAAO,SAAS,IAAI;IACtB;IAEA,kCAAkC;IAClC,qBAAqB,OAAO;QAC1B,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,yBAAyB,CAAC,EAAE;QACzE,OAAO,SAAS,IAAI;IACtB;AACF;uCAEe"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/src/contexts/AIProviderContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport type { ReactNode } from 'react';\nimport aiApi from '../services/ai';\nimport type { AIProvider, AIValidationResponse } from '../services/ai';\n\nexport type ConnectionStatus = 'disconnected' | 'connecting' | 'connected' | 'error';\n\ninterface AIProviderState {\n    provider: AIProvider | null;\n    model: string | null;\n    apiKey: string | null;\n    endpoint: string | null;\n    status: ConnectionStatus;\n    lastValidated: Date | null;\n    errorMessage: string | null;\n}\n\ninterface AIProviderContextType {\n    state: AIProviderState;\n    connect: (provider: AIProvider, apiKey: string, model: string, endpoint?: string) => Promise<boolean>;\n    disconnect: () => void;\n    isConnected: boolean;\n}\n\nconst AIProviderContext = createContext<AIProviderContextType | undefined>(undefined);\n\nconst STORAGE_KEY = 'ai_provider_config';\n\nexport const AIProviderProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n    const [state, setState] = useState<AIProviderState>({\n        provider: null,\n        model: null,\n        apiKey: null,\n        endpoint: null,\n        status: 'disconnected',\n        lastValidated: null,\n        errorMessage: null,\n    });\n\n    // Load saved configuration from localStorage on mount\n    useEffect(() => {\n        const saved = localStorage.getItem(STORAGE_KEY);\n        if (saved) {\n            try {\n                const config = JSON.parse(saved);\n                setState(prev => ({\n                    ...prev,\n                    provider: config.provider,\n                    model: config.model,\n                    apiKey: config.apiKey,\n                    endpoint: config.endpoint,\n                    // Don't automatically set as connected - require revalidation\n                }));\n            } catch (e) {\n                console.error('Failed to load saved AI provider config:', e);\n            }\n        }\n    }, []);\n\n    const connect = async (\n        provider: AIProvider,\n        apiKey: string,\n        model: string,\n        endpoint?: string\n    ): Promise<boolean> => {\n        setState(prev => ({ ...prev, status: 'connecting', errorMessage: null }));\n\n        try {\n            const response: AIValidationResponse = await aiApi.validateConnection({\n                provider,\n                api_key: apiKey,\n                model,\n                endpoint,\n            });\n\n            if (response.status === 'success') {\n                const newState = {\n                    provider,\n                    model,\n                    apiKey,\n                    endpoint: endpoint || null,\n                    status: 'connected' as ConnectionStatus,\n                    lastValidated: new Date(),\n                    errorMessage: null,\n                };\n                setState(newState);\n\n                // Save to localStorage (WARNING: Stores API key locally)\n                localStorage.setItem(STORAGE_KEY, JSON.stringify({\n                    provider,\n                    model,\n                    apiKey,\n                    endpoint,\n                }));\n\n                return true;\n            } else {\n                setState(prev => ({\n                    ...prev,\n                    status: 'error',\n                    errorMessage: response.message,\n                }));\n                return false;\n            }\n        } catch (error: any) {\n            const errorMessage = error.response?.data?.detail || error.message || 'Connection failed';\n            setState(prev => ({\n                ...prev,\n                status: 'error',\n                errorMessage,\n            }));\n            return false;\n        }\n    };\n\n    const disconnect = () => {\n        setState({\n            provider: null,\n            model: null,\n            apiKey: null,\n            endpoint: null,\n            status: 'disconnected',\n            lastValidated: null,\n            errorMessage: null,\n        });\n        localStorage.removeItem(STORAGE_KEY);\n    };\n\n    const value: AIProviderContextType = {\n        state,\n        connect,\n        disconnect,\n        isConnected: state.status === 'connected',\n    };\n\n    return (\n        <AIProviderContext.Provider value={value}>\n            {children}\n        </AIProviderContext.Provider>\n    );\n};\n\nexport const useAIProvider = (): AIProviderContextType => {\n    const context = useContext(AIProviderContext);\n    if (context === undefined) {\n        throw new Error('useAIProvider must be used within an AIProviderProvider');\n    }\n    return context;\n};\n"],"names":[],"mappings":";;;;;;;AAAA;AAEA;;;;;AAsBA,MAAM,kCAAoB,IAAA,8KAAa,EAAoC;AAE3E,MAAM,cAAc;AAEb,MAAM,qBAAwD,CAAC,EAAE,QAAQ,EAAE;;IAC9E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAkB;QAChD,UAAU;QACV,OAAO;QACP,QAAQ;QACR,UAAU;QACV,QAAQ;QACR,eAAe;QACf,cAAc;IAClB;IAEA,sDAAsD;IACtD,IAAA,0KAAS;wCAAC;YACN,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACP,IAAI;oBACA,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B;wDAAS,CAAA,OAAQ,CAAC;gCACd,GAAG,IAAI;gCACP,UAAU,OAAO,QAAQ;gCACzB,OAAO,OAAO,KAAK;gCACnB,QAAQ,OAAO,MAAM;gCACrB,UAAU,OAAO,QAAQ;4BAE7B,CAAC;;gBACL,EAAE,OAAO,GAAG;oBACR,QAAQ,KAAK,CAAC,4CAA4C;gBAC9D;YACJ;QACJ;uCAAG,EAAE;IAEL,MAAM,UAAU,OACZ,UACA,QACA,OACA;QAEA,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,QAAQ;gBAAc,cAAc;YAAK,CAAC;QAEvE,IAAI;YACA,MAAM,WAAiC,MAAM,mIAAK,CAAC,kBAAkB,CAAC;gBAClE;gBACA,SAAS;gBACT;gBACA;YACJ;YAEA,IAAI,SAAS,MAAM,KAAK,WAAW;gBAC/B,MAAM,WAAW;oBACb;oBACA;oBACA;oBACA,UAAU,YAAY;oBACtB,QAAQ;oBACR,eAAe,IAAI;oBACnB,cAAc;gBAClB;gBACA,SAAS;gBAET,yDAAyD;gBACzD,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;oBAC7C;oBACA;oBACA;oBACA;gBACJ;gBAEA,OAAO;YACX,OAAO;gBACH,SAAS,CAAA,OAAQ,CAAC;wBACd,GAAG,IAAI;wBACP,QAAQ;wBACR,cAAc,SAAS,OAAO;oBAClC,CAAC;gBACD,OAAO;YACX;QACJ,EAAE,OAAO,OAAY;YACjB,MAAM,eAAe,MAAM,QAAQ,EAAE,MAAM,UAAU,MAAM,OAAO,IAAI;YACtE,SAAS,CAAA,OAAQ,CAAC;oBACd,GAAG,IAAI;oBACP,QAAQ;oBACR;gBACJ,CAAC;YACD,OAAO;QACX;IACJ;IAEA,MAAM,aAAa;QACf,SAAS;YACL,UAAU;YACV,OAAO;YACP,QAAQ;YACR,UAAU;YACV,QAAQ;YACR,eAAe;YACf,cAAc;QAClB;QACA,aAAa,UAAU,CAAC;IAC5B;IAEA,MAAM,QAA+B;QACjC;QACA;QACA;QACA,aAAa,MAAM,MAAM,KAAK;IAClC;IAEA,qBACI,6LAAC,kBAAkB,QAAQ;QAAC,OAAO;kBAC9B;;;;;;AAGb;GAhHa;KAAA;AAkHN,MAAM,gBAAgB;;IACzB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANa"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///Users/hongyuw2/git-repo/ai-optimism-toolkit/ai_optimism/frontend/app/layout.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode } from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { AIProviderProvider } from '../src/contexts/AIProviderContext';\nimport '../src/index.css';\nimport { useState } from 'react';\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  const [queryClient] = useState(() => new QueryClient());\n  \n  return (\n    <html lang=\"en\">\n      <head>\n        <title>AI Optimism Toolkit</title>\n        <meta name=\"description\" content=\"AI-assisted optimization tool\" />\n      </head>\n      <body>\n        <QueryClientProvider client={queryClient}>\n          <AIProviderProvider>\n            {children}\n          </AIProviderProvider>\n        </QueryClientProvider>\n      </body>\n    </html>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AAEA;;;AANA;;;;;AAQe,SAAS,WAAW,EAAE,QAAQ,EAA2B;;IACtE,MAAM,CAAC,YAAY,GAAG,IAAA,yKAAQ;+BAAC,IAAM,IAAI,+LAAW;;IAEpD,qBACE,6LAAC;QAAK,MAAK;;0BACT,6LAAC;;kCACC,6LAAC;kCAAM;;;;;;kCACP,6LAAC;wBAAK,MAAK;wBAAc,SAAQ;;;;;;;;;;;;0BAEnC,6LAAC;0BACC,cAAA,6LAAC,gNAAmB;oBAAC,QAAQ;8BAC3B,cAAA,6LAAC,8JAAkB;kCAChB;;;;;;;;;;;;;;;;;;;;;;AAMb;GAlBwB;KAAA"}}]
}